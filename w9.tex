\section*{Week 9 (3/1 - 3/7; Appx.B \& Chp.2, Quiz 6)}

\problem{
    f04m2q3
    w08m2q3
    f12f0p2
    w12f0p2
    f13f0p2
    f14f0p2
    f16f0p2
}{
    What is the goal of the memory hierarchy, as stated in class? 
    What two principles make it work? 
    (Two types of the same principle, actually).
}{
    \pg{72} The goal is to provide a memory system with cost per byte almost as low as the cheapest level of memory and speed almost as fast as the fastest level.
    
    \pg{72} \textit{Locality} of reference: \textit{Spacial locality} \& \textit{Temporal locality}.
}

\problem{
    \xxxxxx
    w19f0q3
}{
    Does an average program's locality behavior stay the same while it is executing, or does it vary?
}{
    Vary
}

\problem{
    f13f0p3
    w19f0q23
    \xxxxxx
}{
    Which is harder to write a program for, a shared memory machine or a message passing machine?
    Why?
}{
    Shared memory machine.
    Because you need to write the code for communication.
}

\problem{
    f13f0p3
    w19f0q24
}{
    Which is more expensive to build - a shared memory machine, or a message passing machine? 
    Why?
}{
    \warn{Shared memory machine}.
    Because you don't need hardware to support coherent and consistent.
}

\problem{
    w13f0p3
    w19f0q44
}{
    How do two processes communicate when running on a shared memory machine?
}{
    \todo
}

\problem{
    f12m2q5
    f13m2q3
}{
    Roofline plots what vs what? 
    Why is this information important?
}{
    Arithmetic intensity vs float point performance \& memory performance.

    It lets you calculate if you need to work on improving the memory bandwidth or the float-point hardware.
}

\problem{
    \xxxxxx
    w19f0q18
}{
    Coherence refers to \blank is returned while consistency has to do with \blank.
    
    OR

    Using less than 20 words explain the differences between coherence and consistency.

    OR

    Give a one-word definition of coherence, and a one-word definition of consistency.
}{
    What, when
}

\problem{
    f13f0p5
    w19f0q41
}{
    (Message passing decision, sampled from w19f0q41)

    \nop
}{
    \todo
}

\problem{
    f13f0p3
    \xxxxxx
}{
    Writes to a cache are inherently slower than reads from a cache. Why?
}{
    You can read the tag and simultaneously read the data location, Can discard the data read if the tag didn't match.
    However, you cannot do that on a write, because the write changes the state of the machine - you must first do the tag compare to ensure the write should, in fact change the state.
}

\problem{
    \xxxxxx
    w13f0p1
}{
    AMAT
}{
    Average memory access time = Hit time + Miss rate * Miss penalty
}

\problem{
    \xxxxxx
    w13f0p1
    w19f0q5
}{
    Which type of cache miss can be reduced by using shorter lines?
}{
    Capacity
}
\problem{
    \xxxxxx
    w13f0p1
    w19f0q6
}{
    Which type of cache miss can be reduced by using longer lines?
}{
    Compulsive
}
\problem{
    \xxxxxx
    w13f0p1
    w19f0q7
}{
    Using a different mapping scheme will reduce which type of cache miss?
}{
    Conflict
}

\problem{
    \xxxxxx
    w19f0q34
}{
    The designer has the choice of using a physically addressed cache or a virtually addressed cache.
    Explain the difference (drawing a picture is fine!), and give 1 advantage for each.
}{
    \todo
}

\problem{
    \xxxxxx
    w19f0q37
}{
    Find the Average Memory Access Time (AMAT) for a processor with a 1 ns clock cycle time, a miss
    penalty of 20 clock cycles, a miss rate of 0.10 misses per instruction, and a cache access time (including hit detection) of 1 clock cycle. 
    Assume that the read and write miss penalties are the same and ignore other write stalls.
}{
    \begin{align*}
        \texttt{AMAT} & = \texttt{Hit time} + \texttt{Miss rate} * \texttt{Miss penalty} \\
                      & = 1 \texttt{ clock} * 1 \texttt{ ns/clock} + 0.10 * 20 \texttt{ clock(s)} * 1 \texttt{ ns/clock}  \\
                      & = 3 \texttt{ ns}
    \end{align*}
}

\problem{
    f13f0q6
    f15f1p5
    w19f0q38
    \xxxxxx
}{
    For each technique in the following table, indicate how(on average) the 3 terms of AMAT are affected.
    (Assume there is a single L1 cache.)
}{
    \begin{center}
        \begin{tabular}{  m{0.35\textwidth} ccc }
        \toprule
            Techinque                     & Hit time & Miss rate & Miss penalty \\
        \midrule
            Increasing line/block size    &   & - & + \\ \hline
            Increasing Associativity      & + & - &   \\ \hline
            Decreasing cache size         & - & + &   \\ \hline     
            HW/compiler controlled prefetch
                                          &   & - & - \\ \hline 
            Compiler optimizations        &   & - &   \\ \hline 
            Non-blocking cache            &   &   & - \\ \hline  
            Virtually addressed cache     & - &   &   \\ \hline       
            Victim cache(victim cache and regular cache accessed in parallel)
                                          &   & - &   \\ \hline    
            Critical word first           &   &   & - \\ \hline        
            Multilevel cache(first level) & - & + & - \\ \hline
            Give priority to read translation during indexing of a cache
                                          &   &   & - \\ \hline      
            Merging write bufer           &   &   & - \\ \hline        
            Small \& simple first-level cache 
                                          & - &   &   \\ \hline
            Way prediction                & - &   &   \\ 
        \bottomrule
        \end{tabular}
    \end{center}
}